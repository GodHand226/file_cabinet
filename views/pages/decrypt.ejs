<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const downloadFile = () => {
        const link = document.createElement("a");
        const content = document.querySelector("p").innerHTML;
        console.log(content);
        const file = new Blob([content], { type: "text/plain" });
        link.href = URL.createObjectURL(file);
        link.download = "paste" + Date.now() + ".txt";
        link.click();
        URL.revokeObjectURL(link.href);
      };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <link
      rel="stylesheet"
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>EncryptBin</title>
  </head>
  <body>
    <main>
      <div align="center" class="py-20 h-screen bg-gray-800 px-2">
        <div
          align="center"
          class="max-w-md mx-auto bg-gray-300 rounded-lg overflow-hidden md:max-w-lg"
        >
          <div class="md:flex">
            <div class="w-full">
              <div class="p-4 border-b-2">
                <span class="text-lg font-bold text-gray-600"
                  >Encrypt File Cabinet</span
                >
              </div>
              <form method="post" action="download">
                <div class="p-3">
                  <div class="mt-3 text-center pb-3">
                    <button
                      onclick="downloadFile()"
                      class="w-full h-12 text-lg w-32 bg-red-600 rounded text-white hover:bg-blue-700"
                    >
                      Save Paste
                    </button>
                  </div>
                  <div class="mb-2">
                    <span class="text-lg">
                      <% if(!burnflag ) { %> This document will expire in <%=
                      expire %> <% } else { %> Warning! This message can't be
                      displayed again. <% } %>
                    </span>
                    <br />
                  </div>
                  <div class="text-lg mt-3 text-center pb-3">
                    <span>URL:</span>
                    <input
                      type="text"
                      value="<%= uri%>"
                      name="uri"
                      class="text-lg text-center h-12 px-3 w-full bg-gray-300 border-gray-200 border rounded focus:outline-none focus:border-gray-300"
                    />
                  </div>
                  <div class="text-lg mb-2">
                    <span>Inbox Message:</span>
                    <p
                      id="message"
                      class="text-lg text-center h-12 px-3 w-full border-gray-200 border rounded focus:outline-none focus:border-gray-300"
                    >
                      <%= title%>
                    </p>
                  </div>
                  <div class="mt-3 text-center pb-3">
                    <input
                      type="submit"
                      value="Download"
                      name="file"
                      class="w-full h-12 text-lg w-32 bg-blue-600 rounded text-white hover:bg-blue-700"
                    />
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
